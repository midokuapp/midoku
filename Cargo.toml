[workspace]
members = ["crates/*"]
resolver = "2"

[workspace.package]
edition = "2021"
publish = false
license = "GPL-3.0-or-later"

[workspace.lints.rust]
unsafe_code = "forbid"

[workspace.dependencies]
midoku-macros = { path = "crates/midoku-macros" }
dark-light = { git = "https://github.com/frewsxcv/rust-dark-light.git", rev = "refs/pull/53/head" }
# dioxus = { git = "https://github.com/DioxusLabs/dioxus.git" }
dioxus = "0.6.1"
dioxus-free-icons = { version = "0.9", features = ["lucide"] }
dirs = "5.0.1"
futures-lite = "2.5.0"
jni = "0.21.1"
serde = "1.0.217"
serde_json = "1.0.134"
thiserror = "2.0.9"

[package]
name = "midoku"
version = "0.1.0"
authors = ["Youn MÃ©lois <youn@melois.dev>"]
edition.workspace = true
publish.workspace = true

[dependencies]
midoku-macros.workspace = true
dioxus = { workspace = true, features = ["router"] }
dioxus-free-icons.workspace = true
serde.workspace = true
serde_json.workspace = true
thiserror.workspace = true

[target.'cfg(not(target_os = "android"))'.dependencies]
dark-light.workspace = true
dirs.workspace = true
futures-lite.workspace = true

[target.'cfg(target_os = "android")'.dependencies]
jni.workspace = true

[features]
default = ["desktop"]
desktop = ["dioxus/desktop"]
mobile = ["dioxus/mobile"]

[profile]

[profile.wasm-dev]
inherits = "dev"
opt-level = 1

[profile.server-dev]
inherits = "dev"

[profile.android-dev]
inherits = "dev"
